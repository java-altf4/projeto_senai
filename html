<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Helpdesk Corporativo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --color-automation: #4361ee;
            --color-admin: #3a0ca3;
            --color-it: #7209b7;
            --color-accent: #4cc9f0;
        }
        
        .department-automation {
            --color-primary: var(--color-automation);
            --color-light: #e0e7ff;
        }
        
        .department-admin {
            --color-primary: var(--color-admin);
            --color-light: #ede9fe;
        }
        
        .department-it {
            --color-primary: var(--color-it);
            --color-light: #f3e8ff;
        }
        
        .badge-automation {
            background-color: var(--color-light);
            color: var(--color-automation);
        }
        
        .badge-admin {
            background-color: var(--color-light);
            color: var(--color-admin);
        }
        
        .badge-it {
            background-color: var(--color-light);
            color: var(--color-it);
        }
        
        .animate-fade {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .chat-height {
            height: calc(100vh - 200px);
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <div class="hidden md:flex md:w-64 bg-white border-r border-gray-200 flex-col">
            <div class="flex items-center justify-center p-6">
                <img src="https://placehold.co/200x50?text=HelpDesk+Pro&font=roboto" alt="Logotipo HelpDesk Pro com gradiente azul e ícone de prancheta" class="h-10">
            </div>
            <div class="flex-1 overflow-y-auto">
                <nav class="px-4 space-y-2">
                    <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-2 py-2">Menu Principal</div>
                    <a href="#" id="dashboard-tab" class="flex items-center px-2 py-3 text-sm font-medium text-white rounded-lg bg-blue-600 group">
                        <i class="fas fa-tachometer-alt mr-3 text-lg"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="#" id="tickets-tab" class="flex items-center px-2 py-3 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 group">
                        <i class="fas fa-ticket-alt mr-3 text-lg text-gray-500 group-hover:text-blue-500"></i>
                        <span>Chamados</span>
                    </a>
                    <a href="#" id="chat-tab" class="flex items-center px-2 py-3 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 group">
                        <i class="fas fa-comments mr-3 text-lg text-gray-500 group-hover:text-blue-500"></i>
                        <span>Chat</span>
                    </a>
                    
                    <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-2 py-2 mt-6">Departamentos</div>
                    <a href="#" id="automation-tab" class="flex items-center px-2 py-3 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 group">
                        <i class="fas fa-robot mr-3 text-lg text-gray-500 group-hover:text-blue-500"></i>
                        <span>Automação</span>
                    </a>
                    <a href="#" id="admin-tab" class="flex items-center px-2 py-3 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 group">
                        <i class="fas fa-file-alt mr-3 text-lg text-gray-500 group-hover:text-blue-500"></i>
                        <span>Administrativo</span>
                    </a>
                    <a href="#" id="it-tab" class="flex items-center px-2 py-3 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 group">
                        <i class="fas fa-laptop mr-3 text-lg text-gray-500 group-hover:text-blue-500"></i>
                        <span>Tecnologia</span>
                    </a>
                </nav>
            </div>
            <div class="p-4 border-t border-gray-200">
                <div class="flex items-center">
                    <div class="rounded-full h-9 w-9 bg-blue-100 flex items-center justify-center">
                        <i class="fas fa-user text-blue-600"></i>
                    </div>
                    <div class="ml-3">
                        <p class="text-sm font-medium text-gray-900" id="current-user-name">Carregando...</p>
                        <p class="text-xs text-gray-500" id="current-user-email"></p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="flex-1 overflow-auto">
            <!-- Header -->
            <header class="bg-white shadow-sm">
                <div class="flex items-center justify-between px-6 py-4">
                    <div class="flex items-center">
                        <button id="mobile-menu-btn" class="md:hidden mr-4 text-gray-500 hover:text-gray-600">
                            <i class="fas fa-bars text-xl"></i>
                        </button>
                        <h1 id="header-title" class="text-xl font-semibold text-gray-900">Dashboard</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button class="p-2 text-gray-500 hover:text-gray-600 rounded-full hover:bg-gray-100 relative">
                            <i class="fas fa-bell text-xl"></i>
                            <span class="absolute top-0 right-0 h-2 w-2 rounded-full bg-red-500"></span>
                        </button>
                        <button class="p-2 text-gray-500 hover:text-gray-600 rounded-full hover:bg-gray-100">
                            <i class="fas fa-cog text-xl"></i>
                        </button>
                    </div>
                </div>
            </header>
            
            <!-- Content Area -->
            <main class="flex-1 p-6">
                <!-- Dashboard View -->
                <div id="dashboard-view">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Chamados Abertos</p>
                                    <p class="mt-1 text-3xl font-semibold text-gray-900" id="open-tickets-count">0</p>
                                </div>
                                <div class="rounded-full h-12 w-12 bg-blue-100 flex items-center justify-center">
                                    <i class="fas fa-ticket-alt text-blue-600"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Em Andamento</p>
                                    <p class="mt-1 text-3xl font-semibold text-gray-900" id="in-progress-tickets-count">0</p>
                                </div>
                                <div class="rounded-full h-12 w-12 bg-yellow-100 flex items-center justify-center">
                                    <i class="fas fa-spinner text-yellow-500"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Resolvidos Hoje</p>
                                    <p class="mt-1 text-3xl font-semibold text-gray-900" id="resolved-today-tickets-count">0</p>
                                </div>
                                <div class="rounded-full h-12 w-12 bg-green-100 flex items-center justify-center">
                                    <i class="fas fa-check text-green-500"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Reincidentes</p>
                                    <p class="mt-1 text-3xl font-semibold text-gray-900" id="recurrent-tickets-count">0</p>
                                </div>
                                <div class="rounded-full h-12 w-12 bg-red-100 flex items-center justify-center">
                                    <i class="fas fa-exclamation text-red-500"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Chart by Department -->
                        <div class="lg:col-span-2 bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h2 class="text-lg font-medium text-gray-900">Chamados por Departamento</h2>
                                <button class="text-sm text-blue-600 hover:text-blue-800">Ver Todos</button>
                            </div>
                            <div id="departments-chart" class="h-64">
                                <!-- Chart will be rendered here -->
                            </div>
                        </div>
                        
                        <!-- Recent Tickets -->
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h2 class="text-lg font-medium text-gray-900">Chamados Recentes</h2>
                                <button class="text-sm text-blue-600 hover:text-blue-800">Ver Todos</button>
                            </div>
                            <div id="recent-tickets-list" class="space-y-4">
                                <!-- Tickets will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tickets View -->
                <div id="tickets-view" class="hidden">
                    <div class="mb-6">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                            <h2 class="text-2xl font-bold text-gray-800 mb-4 md:mb-0">Gerenciamento de Chamados</h2>
                            <button id="new-ticket-btn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center">
                                <i class="fas fa-plus mr-2"></i>
                                Novo Chamado
                            </button>
                        </div>
                    </div>
                    
                    <!-- Filters -->
                    <div class="bg-white rounded-lg shadow overflow-hidden mb-6">
                        <div class="p-4">
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div>
                                    <label for="search" class="block text-sm font-medium text-gray-700 mb-1">Buscar</label>
                                    <div class="relative">
                                        <input type="text" id="search" placeholder="ID ou título" class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                            <i class="fas fa-search text-gray-400"></i>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label for="department-filter" class="block text-sm font-medium text-gray-700 mb-1">Departamento</label>
                                    <select id="department-filter" class="w-full pl-3 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                                        <option value="">Todos</option>
                                        <option value="automation">Automação</option>
                                        <option value="admin">Administrativo</option>
                                        <option value="it">Tecnologia</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="status-filter" class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                    <select id="status-filter" class="w-full pl-3 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                                        <option value="">Todos</option>
                                        <option value="open">Aberto</option>
                                        <option value="in_progress">Em Andamento</option>
                                        <option value="resolved">Resolvido</option>
                                        <option value="closed">Fechado</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="priority-filter" class="block text-sm font-medium text-gray-700 mb-1">Prioridade</label>
                                    <select id="priority-filter" class="w-full pl-3 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                                        <option value="">Todas</option>
                                        <option value="low">Baixa</option>
                                        <option value="medium">Média</option>
                                        <option value="high">Alta</option>
                                        <option value="critical">Crítica</option>
                                    </select>
                                </div>
                            </div>
                            <div class="flex justify-end mt-4">
                                <button id="reset-filters" class="mr-3 px-4 py-2 text-sm text-gray-600 hover:text-gray-800">Limpar Filtros</button>
                                <button id="apply-filters" class="px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700">Aplicar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tickets Table -->
                    <div class="bg-white rounded-lg shadow overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Título</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Departamento</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Prioridade</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Criado Em</th>
                                        <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="tickets-table-body" class="bg-white divide-y divide-gray-200">
                                    <!-- Tickets will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                        <div class="bg-gray-50 px-6 py-3 flex items-center justify-between border-t border-gray-200">
                            <div class="flex-1 flex justify-between sm:hidden">
                                <button id="mobile-prev-page" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                                    Anterior
                                </button>
                                <button id="mobile-next-page" class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                                    Próximo
                                </button>
                            </div>
                            <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                                <div class="text-sm text-gray-700">
                                    Mostrando <span id="pagination-from">1</span> a <span id="pagination-to">10</span> de <span id="total-tickets">0</span> resultados
                                </div>
                                <div>
                                    <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                                        <button id="first-page" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                            <i class="fas fa-angle-double-left"></i>
                                        </button>
                                        <button id="prev-page" class="relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                            <i class="fas fa-angle-left"></i>
                                        </button>
                                        <div id="page-numbers" class="flex">
                                            <!-- Page numbers will be inserted here -->
                                        </div>
                                        <button id="next-page" class="relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                            <i class="fas fa-angle-right"></i>
                                        </button>
                                        <button id="last-page" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                            <i class="fas fa-angle-double-right"></i>
                                        </button>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Chat View -->
                <div id="chat-view" class="hidden h-full">
                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 h-full">
                        <!-- Conversations List -->
                        <div class="bg-white rounded-lg shadow overflow-hidden h-full">
                            <div class="p-4 border-b border-gray-200">
                                <h3 class="text-lg font-medium text-gray-900">Conversas</h3>
                                <div class="mt-2 relative">
                                    <input type="text" placeholder="Buscar conversas..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="fas fa-search text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                            <div id="conversations-list" class="divide-y divide-gray-200 overflow-y-auto chat-height">
                                <!-- Conversations will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Chat Area -->
                        <div class="lg:col-span-3 bg-white rounded-lg shadow overflow-hidden flex flex-col h-full">
                            <div id="chat-header" class="p-4 border-b border-gray-200 flex items-center">
                                <div class="rounded-full h-10 w-10 bg-blue-100 flex items-center justify-center">
                                    <i class="fas fa-headset text-blue-600"></i>
                                </div>
                                <div class="ml-3 flex-1">
                                    <h4 id="chat-title" class="text-md font-medium text-gray-900">Selecione uma conversa</h4>
                                    <p id="chat-status" class="text-xs text-gray-500">Status: Desconectado</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button id="voice-call-btn" class="p-2 text-gray-500 hover:text-blue-500 rounded-full hover:bg-gray-100 disabled:text-gray-300 disabled:hover:bg-transparent" disabled>
                                        <i class="fas fa-phone-alt"></i>
                                    </button>
                                    <button id="video-call-btn" class="p-2 text-gray-500 hover:text-blue-500 rounded-full hover:bg-gray-100 disabled:text-gray-300 disabled:hover:bg-transparent" disabled>
                                        <i class="fas fa-video"></i>
                                    </button>
                                    <button id="attach-file-btn" class="p-2 text-gray-500 hover:text-blue-500 rounded-full hover:bg-gray-100 disabled:text-gray-300 disabled:hover:bg-transparent" disabled>
                                        <i class="fas fa-paperclip"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div id="messages-container" class="flex-1 p-4 overflow-y-auto bg-gray-50">
                                <div id="no-chat-selected" class="flex flex-col items-center justify-center h-full text-center">
                                    <div class="rounded-full h-16 w-16 bg-gray-100 flex items-center justify-center mb-4">
                                        <i class="fas fa-comment-dots text-gray-400 text-2xl"></i>
                                    </div>
                                    <h3 class="text-lg font-medium text-gray-900 mb-1">Nenhuma conversa selecionada</h3>
                                    <p class="text-sm text-gray-500">Selecione uma conversa na lista ao lado para começar a trocar mensagens.</p>
                                </div>
                                <div id="chat-messages" class="hidden space-y-4">
                                    <!-- Messages will be loaded here -->
                                </div>
                            </div>
                            
                            <div id="message-input-container" class="p-4 border-t border-gray-200 hidden">
                                <div class="flex items-center space-x-3">
                                    <button class="p-2 text-gray-500 hover:text-blue-500 rounded-full hover:bg-gray-100">
                                        <i class="fas fa-smile"></i>
                                    </button>
                                    <div class="flex-1">
                                        <div class="relative">
                                            <textarea id="message-input" rows="1" placeholder="Digite sua mensagem..." class="w-full pl-3 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 resize-none"></textarea>
                                            <button id="send-message-btn" class="absolute right-2 bottom-2 p-1 text-blue-600 hover:text-blue-800">
                                                <i class="fas fa-paper-plane"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Automation Department View -->
                <div id="automation-view" class="hidden">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Departamento de Automação</h2>
                            <p class="text-sm text-gray-600">Gestão de sistemas robóticos e automação industrial</p>
                        </div>
                        <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center">
                            <i class="fas fa-robot mr-2"></i>
                            Novo Robô
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Robôs Ativos</p>
                                    <p class="mt-1 text-3xl font-semibold text-gray-900" id="active-robots">12</p>
                                </div>
                                <div class="rounded-full h-12 w-12 bg-blue-100 flex items-center justify-center">
                                    <i class="fas fa-robot text-blue-600"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Manutenções</p>
                                    <p class="mt-1 text-3xl font-semibold text-gray-900" id="maintenance-robots">3</p>
                                </div>
                                <div class="rounded-full h-12 w-12 bg-yellow-100 flex items-center justify-center">
                                    <i class="fas fa-tools text-yellow-500"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Fora de Operação</p>
                                    <p class="mt-1 text-3xl font-semibold text-gray-900" id="inactive-robots">1</p>
                                </div>
                                <div class="rounded-full h-12 w-12 bg-red-100 flex items-center justify-center">
                                    <i class="fas fa-exclamation-triangle text-red-500"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow overflow-hidden mb-6">
                        <div class="p-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">Status dos Robôs</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Localização</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Última Manutenção</th>
                                        <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="robots-table-body" class="bg-white divide-y divide-gray-200">
                                    <!-- Robots will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Alertas Recentes</h3>
                            <div class="space-y-4">
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 mt-1">
                                        <div class="h-3 w-3 rounded-full bg-red-500"></div>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-900">Robô #AX-007 - Erro no servo motor</p>
                                        <p class="text-xs text-gray-500">Linha de produção 3 • Há 2 horas</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    
